{"version":3,"sources":["../../src/features/users/use-cases/addNewUser.ts"],"names":[],"mappings":";;;;;;AAAA,sEAAmE;AAGnE,6DAAmC;AAEnC,SAAiB,cAAc,CAAC,EAAE,UAAU,EAAmC;IAC9E,OAAO,KAAK,EAAE,QAAe,EAAE,EAAE;QAChC,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,SAAS,EAAE,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,aAAa,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,kBAAM,EAAC,QAAQ,CAAC,CAAC;QACzJ,MAAM,QAAQ,GAAG,MAAM,UAAU,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC1D,IAAI,QAAQ,EAAE;YACb,MAAM,IAAI,2BAAY,CAAC;gBACtB,OAAO,EAAE,qBAAqB;gBAC9B,MAAM,EAAE,SAAS;gBACjB,UAAU,EAAE,GAAG;gBACf,IAAI,EAAE;oBACL,KAAK,EAAE,QAAQ,EAAE;iBACjB;aAED,CAAC,CAAC;SACH;QACD,MAAM,IAAI,GAAG,MAAM,UAAU,CAAC,UAAU,CAAC;YACxC,KAAK,EAAE,QAAQ,EAAE;YACjB,SAAS,EAAE,YAAY,EAAE;YACzB,QAAQ,EAAE,WAAW,EAAE;YACvB,QAAQ,EAAE,WAAW,EAAE;YACvB,MAAM,EAAE,SAAS,EAAE;YACnB,GAAG,EAAE,MAAM,EAAE;YACb,QAAQ,EAAE,WAAW,EAAE;YACvB,SAAS,EAAE,WAAW,EAAE;YACxB,cAAc,EAAE,aAAa,EAAE;YAC/B,IAAI,EAAE,OAAO,EAAE;SACf,CAAC,CAAC;QAEH,OAAO,IAAI,CAAC;IAEb,CAAC,CAAC;AACH,CAAC;AA/BD,wCA+BC","file":"addNewUser.js","sourcesContent":["import { ExpressError } from '../../../common/errors/ExpressError';\nimport { IUser } from '../models/interfaces';\nimport { IUserRepository } from '../interfaces';\nimport entity from './../entities';\n\nexport  function makeAddNewUser({ repository }: { repository: IUserRepository }) {\n\treturn async (userData: IUser) => {\n\t\tconst { getBio, getEmail, getFirstName, getGender, getIsActive, getIsDelete, getLastName, getPassword, getProfilePic, getRole } = await entity(userData);\n\t\tconst existing = await repository.findByEmail(getEmail());\n\t\tif (existing) {\n\t\t\tthrow new ExpressError({\n\t\t\t\tmessage: 'User already exists',\n\t\t\t\tstatus: 'warning',\n\t\t\t\tstatusCode: 409,\n\t\t\t\tdata: {\n\t\t\t\t\temail: getEmail()\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\t\tconst user = await repository.createUser({\n\t\t\temail: getEmail(),\n\t\t\tfirstName: getFirstName(),\n\t\t\tlastName: getLastName(),\n\t\t\tpassword: getPassword(),\n\t\t\tgender: getGender(),\n\t\t\tbio: getBio(),\n\t\t\tisActive: getIsActive(),\n\t\t\tisDeleted: getIsDelete(),\n\t\t\tprofilePicture: getProfilePic(),\n\t\t\trole: getRole()\n\t\t});\n\n\t\treturn user;\n\n\t};\n}"]}