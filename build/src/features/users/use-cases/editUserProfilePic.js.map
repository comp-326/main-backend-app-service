{"version":3,"sources":["../../src/features/users/use-cases/editUserProfilePic.ts"],"names":[],"mappings":";;;;;;AAAA,sEAAmE;AAGnE,0DAAuD;AACvD,iGAAwE;AAExE,SAAgB,kBAAkB,CAAC,EAAC,UAAU,EAA8B;IAC3E,OAAO,KAAK,EAAE,MAAc,EAAE,QAA+C,EAAE,EAAE;QAChF,IAAI,CAAC,MAAM,IAAI,QAAQ,CAAC,IAAI,EAAE;YAC7B,MAAM,IAAA,uBAAU,EAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACrC,MAAM,IAAI,2BAAY,CAAC;gBACtB,IAAI,EAAE,EAAE;gBACR,OAAO,EAAE,sBAAsB;gBAC/B,MAAM,EAAE,OAAO;gBACf,UAAU,EAAE,GAAG;aACf,CAAC,CAAC;SACH;QACD,IAAI,CAAC,IAAA,4BAAiB,EAAC,MAAM,CAAC,IAAI,QAAQ,CAAC,IAAI,EAAE;YAChD,MAAM,IAAA,uBAAU,EAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACrC,MAAM,IAAI,2BAAY,CAAC;gBACtB,IAAI,EAAE,EAAE;gBACR,OAAO,EAAE,gCAAgC;gBACzC,MAAM,EAAE,OAAO;gBACf,UAAU,EAAE,GAAG;aACf,CAAC,CAAC;SACH;QACD,MAAM,UAAU,CAAC,UAAU,CAAC,MAAM,EAAC,QAAQ,CAAC,CAAC;QAE7C,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC;IAC3B,CAAC,CAAC;AAEH,CAAC;AAzBD,gDAyBC","file":"editUserProfilePic.js","sourcesContent":["import { ExpressError } from '../../../common/errors/ExpressError';\nimport { IUser } from '../models/interfaces';\nimport { IUserRepository } from '../interfaces';\nimport { deleteFile } from '../../../utils/fileSystem';\nimport validateMongodbId from '../../../utils/mongo/ObjectId-validator';\n\nexport function makeEditProfilePic({repository}:{repository:IUserRepository}){\n\treturn async (userId: string, userData: IUser & { file: Express.Multer.File }) => {\n\t\tif (!userId && userData.file) {\n\t\t\tawait deleteFile(userData.file.path);\n\t\t\tthrow new ExpressError({\n\t\t\t\tdata: {},\n\t\t\t\tmessage: 'User id not provided',\n\t\t\t\tstatus: 'error',\n\t\t\t\tstatusCode: 400\n\t\t\t});\n\t\t}\n\t\tif (!validateMongodbId(userId) && userData.file) {\n\t\t\tawait deleteFile(userData.file.path);\n\t\t\tthrow new ExpressError({\n\t\t\t\tdata: {},\n\t\t\t\tmessage: 'Please provide a valid user id',\n\t\t\t\tstatus: 'error',\n\t\t\t\tstatusCode: 400\n\t\t\t});\n\t\t}\n\t\tawait repository.updateById(userId,userData);\n\n\t\treturn { done: userData };\n\t};\n\n}"]}